"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[124],{124:(M,_,u)=>{u.r(_),u.d(_,{PeopleRoutingModule:()=>x});var c=u(7276),e=u(4946),m=u(553),Z=u(9862);let f=(()=>{var o;class i{constructor(t){this.http=t}getPeople(t,n,s,l,g){return this.http.get(g?`${m.N.server}/api/people?limit=${t}&page=${n}&sortby=${s}&orderby=${l}&name=${g}`:`${m.N.server}/api/people?limit=${t}&page=${n}&sortby=${s}&orderby=${l}`)}getPerson(t){return this.http.get(`${m.N.server}/api/people/${t}`)}updatePerson(t,n){return this.http.patch(`${m.N.server}/api/people/${t}`,n)}deletePerson(t){return this.http.delete(`${m.N.server}/api/people/${t}`)}createPerson(t){return this.http.post(`${m.N.server}/api/people`,t)}}return(o=i).\u0275fac=function(t){return new(t||o)(e.LFG(Z.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),i})();var p=u(95),b=u(6814);function T(o,i){if(1&o&&(e.TgZ(0,"tr",13)(1,"td",14),e._uU(2),e.qZA(),e.TgZ(3,"td",14),e._uU(4),e.qZA(),e.TgZ(5,"td",14),e._uU(6),e.qZA(),e.TgZ(7,"td",14),e._uU(8),e.qZA()()),2&o){const r=i.$implicit;e.MGl("routerLink","./person/",r.id,""),e.xp6(2),e.Oqu(r.id),e.xp6(2),e.Oqu(r.name),e.xp6(2),e.Oqu(r.age),e.xp6(2),e.Oqu(r.email)}}function P(o,i){if(1&o&&(e.TgZ(0,"option",15),e._uU(1),e.qZA()),2&o){const r=i.$implicit;e.Q6J("value",r),e.xp6(1),e.Oqu(r)}}let v=(()=>{var o;class i{constructor(t){this.persons=[],this.search="",this.page=1,this.pages=[],this.limit=10,this.sortBy="asc",this.orderBy="id",this.maxPagesDisplayed=5,this.onGetPeople=n=>{this.pages=[];for(let s=1;s<=n.last_page;s++)this.pages.push(s);this.persons=n.data},this.service=t}ngOnInit(){this.service.getPeople(this.limit,this.page,this.sortBy,this.orderBy).subscribe(this.onGetPeople)}getPeople(){this.search?this.service.getPeople(this.limit,this.page,this.sortBy,this.orderBy,this.search).subscribe(this.onGetPeople):this.service.getPeople(this.limit,this.page,this.sortBy,this.orderBy).subscribe(this.onGetPeople)}onLimitOrPageChange(){this.getPeople()}onOrderByChange(t){this.orderBy=t,this.getPeople()}onSearch(){this.getPeople()}}return(o=i).\u0275fac=function(t){return new(t||o)(e.Y36(f))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-people"]],decls:31,vars:6,consts:[[1,"p-4","w-full"],[1,"flex"],["type","search","placeholder","Search",1,"border","border-gray-500","p-2","outline-none","flex-1",3,"ngModel","ngModelChange"],[1,"pt-2","pb-2","pl-4","pr-4","bg-blue-500","text-white","hover:bg-blue-600",3,"click"],[1,"w-full","text-left","border-gray-700","border"],[1,"p-2","border-gray-700","border","hover:bg-black","hover:bg-opacity-10","cursor-pointer",3,"click"],["class","hover:bg-black hover:bg-opacity-5 cursor-pointer",3,"routerLink",4,"ngFor","ngForOf"],["type","number",1,"border","border-gray-500","w-12","p-1",3,"ngModel","ngModelChange"],[1,"border","border-gray-500","p-1.5","outline-none",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["value","asc"],["value","desc"],[1,"ml-2","hover:bg-blue-600","rounded-lg","pt-1.5","pb-1.5","pl-4","pr-4","text-white","bg-blue-500",3,"click"],[1,"hover:bg-black","hover:bg-opacity-5","cursor-pointer",3,"routerLink"],[1,"p-2","border-gray-700","border"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"input",2),e.NdJ("ngModelChange",function(l){return n.search=l}),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){return n.onSearch()}),e._uU(4," Search "),e.qZA()(),e._UZ(5,"br"),e.TgZ(6,"table",4)(7,"tr")(8,"th",5),e.NdJ("click",function(){return n.onOrderByChange("id")}),e._uU(9," ID "),e.qZA(),e.TgZ(10,"th",5),e.NdJ("click",function(){return n.onOrderByChange("name")}),e._uU(11," Name "),e.qZA(),e.TgZ(12,"th",5),e.NdJ("click",function(){return n.onOrderByChange("age")}),e._uU(13," Age "),e.qZA(),e.TgZ(14,"th",5),e.NdJ("click",function(){return n.onOrderByChange("email")}),e._uU(15," Email "),e.qZA()(),e.YNc(16,T,9,5,"tr",6),e.qZA(),e._UZ(17,"br"),e._uU(18," Limit: "),e.TgZ(19,"input",7),e.NdJ("ngModelChange",function(l){return n.limit=l}),e.qZA(),e._uU(20," Page: "),e.TgZ(21,"select",8),e.NdJ("ngModelChange",function(l){return n.page=l}),e.YNc(22,P,2,2,"option",9),e.qZA(),e._uU(23," Sort By: "),e.TgZ(24,"select",8),e.NdJ("ngModelChange",function(l){return n.sortBy=l}),e.TgZ(25,"option",10),e._uU(26,"ascending"),e.qZA(),e.TgZ(27,"option",11),e._uU(28,"descending"),e.qZA()(),e.TgZ(29,"button",12),e.NdJ("click",function(){return n.onLimitOrPageChange()}),e._uU(30," Reload "),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngModel",n.search),e.xp6(14),e.Q6J("ngForOf",n.persons),e.xp6(3),e.Q6J("ngModel",n.limit),e.xp6(2),e.Q6J("ngModel",n.page),e.xp6(1),e.Q6J("ngForOf",n.pages),e.xp6(2),e.Q6J("ngModel",n.sortBy))},dependencies:[c.rH,p.YN,p.Kr,p.Fj,p.wV,p.EJ,p.JJ,p.On,b.sg],encapsulation:2}),i})();var a=function(o){return o.CREATE="CREATE",o.UPDATE="UPDATE",o.DELETE="DELETE",o}(a||{}),h=u(2039),A=u(6749);function y(o,i){1&o&&(e.TgZ(0,"p",11),e._uU(1," Name is Required "),e.qZA())}function E(o,i){1&o&&(e.TgZ(0,"p",11),e._uU(1," Name must be 3 characters long "),e.qZA())}function N(o,i){1&o&&(e.TgZ(0,"p",11),e._uU(1," Age is Required "),e.qZA())}function U(o,i){1&o&&(e.TgZ(0,"p",11),e._uU(1," Age is not valid "),e.qZA())}function q(o,i){1&o&&(e.TgZ(0,"p",11),e._uU(1," Email is Required "),e.qZA())}function J(o,i){1&o&&(e.TgZ(0,"p",11),e._uU(1," Email is not valid "),e.qZA())}function F(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(r);const n=e.oxw(2);return e.KtG(n.setDeleteMode())}),e._uU(1," Delete "),e.qZA()}}function k(o,i){if(1&o){const r=e.EpF();e.TgZ(0,"form",4),e.NdJ("ngSubmit",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.submit())}),e.TgZ(1,"div")(2,"h1"),e._uU(3,"Person"),e.qZA()(),e.TgZ(4,"div")(5,"label"),e._uU(6,"Name"),e.qZA(),e._UZ(7,"input",5),e.YNc(8,y,2,0,"p",6),e.YNc(9,E,2,0,"p",6),e.qZA(),e._UZ(10,"br"),e.TgZ(11,"div")(12,"label"),e._uU(13,"Age"),e.qZA(),e._UZ(14,"input",7),e.YNc(15,N,2,0,"p",6),e.YNc(16,U,2,0,"p",6),e.qZA(),e._UZ(17,"br"),e.TgZ(18,"div")(19,"label"),e._uU(20,"Email"),e.qZA(),e._UZ(21,"input",8),e.YNc(22,q,2,0,"p",6),e.YNc(23,J,2,0,"p",6),e.qZA(),e._UZ(24,"br"),e.TgZ(25,"div")(26,"button",9),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG("CREATE"!=n.mode?n.setUpdateMode():null)}),e._uU(27," Save "),e.qZA(),e.YNc(28,F,2,0,"button",10),e.qZA()()}if(2&o){const r=e.oxw();let t,n,s,l,g,d;e.Q6J("formGroup",r.personForm),e.xp6(8),e.Q6J("ngIf",(null==(t=r.personForm.get("name"))?null:t.touched)&&(null==(t=r.personForm.get("name"))?null:t.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==(n=r.personForm.get("name"))?null:n.touched)&&(null==(n=r.personForm.get("name"))?null:n.hasError("minlength"))),e.xp6(6),e.Q6J("ngIf",(null==(s=r.personForm.get("age"))?null:s.touched)&&(null==(s=r.personForm.get("age"))?null:s.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==(l=r.personForm.get("age"))?null:l.touched)&&(null==(l=r.personForm.get("age"))?null:l.hasError("min"))),e.xp6(6),e.Q6J("ngIf",(null==(g=r.personForm.get("email"))?null:g.touched)&&(null==(g=r.personForm.get("email"))?null:g.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==(d=r.personForm.get("email"))?null:d.touched)&&(null==(d=r.personForm.get("email"))?null:d.hasError("email"))),e.xp6(3),e.Gre("","CREATE"==r.mode?"rounded-lg":"rounded-l-lg"," pt-2 pb-2 pl-4 pr-4 bg-blue-500 text-white hover:bg-blue-600 shadow-lg transition"),e.xp6(2),e.Q6J("ngIf","CREATE"!=r.mode)}}let C=(()=>{var o;class i{constructor(t,n,s){this.mode=null,this.personForm=new p.cw({name:new p.NI(null,[p.kI.required,p.kI.minLength(3)]),age:new p.NI(null,[p.kI.required,p.kI.min(1)]),email:new p.NI(null,[p.kI.required,p.kI.email])}),this.popup={message:"",type:h.C.INFO,open:!1,timeout:5e3},this.service=t,this.route=n,this.router=s}setPerson(t){this.person=t,this.personForm.setValue({name:t.name,age:t.age,email:t.email})}submit(){this.personForm.markAllAsTouched(),this.personForm.valid&&(this.mode==a.UPDATE?this.service.updatePerson(this.person.id,this.personForm.value).subscribe(t=>{this.showPopup("Updated Successfully",h.C.SUCCESS)},t=>{this.showPopup("Couldn't Update",h.C.ERROR)}):this.mode==a.CREATE?this.service.createPerson(this.personForm.value).subscribe(t=>{this.router.navigate(["/people"])},t=>{this.showPopup("Couldn't Create",h.C.ERROR)}):this.mode==a.DELETE&&this.service.deletePerson(this.person.id).subscribe(t=>{this.router.navigate(["/people"])},t=>{this.showPopup("Couldn't Delete",h.C.ERROR)}))}showPopup(t,n){this.popup.message=t,this.popup.type=n,this.popup.open=!0,setTimeout(()=>{this.popup.message="",this.popup.type="info",this.popup.open=!1},this.popup.timeout)}isNumber(t){return null!=t&&""!==t&&!isNaN(Number(t.toString()))}ngOnInit(){this.route.params.subscribe(t=>{if(t.id){if(!this.isNumber(t.id))return void this.router.navigate(["/people"]);this.service.getPerson(t.id).subscribe(n=>{this.setPerson(n)},n=>{this.router.navigate(["/not-found"])})}else this.setCreateMode()})}setUpdateMode(){this.mode=a.UPDATE}setCreateMode(){this.mode=a.CREATE}setDeleteMode(){this.mode=a.DELETE}}return(o=i).\u0275fac=function(t){return new(t||o)(e.Y36(f),e.Y36(c.gz),e.Y36(c.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-person"]],decls:7,vars:2,consts:[[1,"p-4"],["routerLink","../..",1,"pt-2","pb-2","pl-4","pr-4","bg-blue-500","text-white","hover:bg-blue-600","shadow-lg","rounded-lg","transition","cursor-pointer"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"popup"],[3,"formGroup","ngSubmit"],["type","text","placeholder","Name","formControlName","name",1,"border","border-gray-500","w-full","p-2","shadow-lg","outline-none","focus:border-gray-900"],["class","text-red-500",4,"ngIf"],["type","number","placeholder","Age","formControlName","age",1,"border","border-gray-500","w-full","p-2","shadow-lg","outline-none","focus:border-gray-900"],["type","email","placeholder","Email","formControlName","email",1,"border","border-gray-500","w-full","p-2","shadow-lg","outline-none","focus:border-gray-900"],[3,"click"],["class","pt-2 pb-2 pl-4 pr-4 bg-red-500 text-white hover:bg-red-600 rounded-r-lg shadow-lg transition",3,"click",4,"ngIf"],[1,"text-red-500"],[1,"pt-2","pb-2","pl-4","pr-4","bg-red-500","text-white","hover:bg-red-600","rounded-r-lg","shadow-lg","transition",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e._uU(2," Go Back "),e.qZA(),e._UZ(3,"br")(4,"br"),e.YNc(5,k,29,11,"form",2),e.qZA(),e._UZ(6,"app-popup",3)),2&t&&(e.xp6(5),e.Q6J("ngIf",n.person||"CREATE"==n.mode),e.xp6(1),e.Q6J("popup",n.popup))},dependencies:[c.rH,A.R,p._Y,p.Fj,p.wV,p.JJ,p.JL,p.sg,p.u,b.O5],encapsulation:2}),i})();const w=[{path:"",component:v},{path:"person/:id",component:C},{path:"save",component:C}];let x=(()=>{var o;class i{}return(o=i).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.Bz.forChild(w),c.Bz]}),i})()}}]);